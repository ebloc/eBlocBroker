* GNU Privacy

** Provider and Requester should do it

** TODO check before submitting job for the requester

#+begin_src bash
# key_id=$(~/ebloc-broker/broker/bash_scripts/get_gpg_fingerprint.sh)
key_id=$(gpg --list-secret-keys --keyid-format LONG <email>)
echo $key_id && gpg --list-keys $key_id
gpg --verbose --keyserver hkps://keyserver.ubuntu.com --send-keys $key_id
#+end_src

----------------------------------------------------------------------

** Requester

See https://stackoverflow.com/a/34132924/2402577 for more info.

#+begin_src bash
key_id="239FE90C6BF3D91CFEC825C3CC507FABC162029F"
gpg --verbose --keyserver hkps://keyserver.ubuntu.com --recv-key $key_id
# gpg --verbose --keyserver hkps://keyserver.ubuntu.com --search-keys $key_id
#+end_src

#+begin_src bash
gpg --edit-key $key_id
> trust
  1 = I do not know or will not say
  2 = I do NOT trust
  3 = I trust marginally
  4 = I trust fully
  5 = I trust ultimately
  m = back to the main menu

Your decision? 5
Do you really want to set this key to ultimate trust? (y/N) y
> quit
#+end_src

** Change the passphrase of the secret key

#+begin_src bash
gpg --edit-key <your_key_id_here>
gpg> passwd
gpg> save
#+end_src

~gpg --delete-secret-key <key_id>~

#+begin_src bash
gpg --list-keys
gpg --batch --delete-key <key_id>

gpg --list-keys --with-colons --fingerprint  | sed -n 's/^fpr:::::::::\([[:alnum:]]\+\):/\1/p'

for i in `gpg --list-keys --with-colons --fingerprint  | sed -n 's/^fpr:::::::::\([[:alnum:]]\+\):/\1/p'`; do
    gpg --batch --delete-key "$i"
done
#+end_src
